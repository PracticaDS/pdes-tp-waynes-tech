(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,a,n){},,,,,,function(e,a){},function(e,a,n){},function(e,a,n){e.exports=n.p+"static/media/delete.6e7a49f4.PNG"},function(e,a,n){e.exports=n.p+"static/media/rotate.d45efe18.PNG"},function(e,a,n){e.exports=n.p+"static/media/move.cbfcb2fb.PNG"},function(e,a,n){e.exports=n.p+"static/media/crafter.42bc2297.PNG"},function(e,a,n){e.exports=n.p+"static/media/starter.8d09d4f3.PNG"},function(e,a,n){e.exports=n.p+"static/media/furnace.617ec208.PNG"},function(e,a,n){e.exports=n.p+"static/media/seller.3d538c9e.PNG"},function(e,a,n){e.exports=n.p+"static/media/transporter.00687f2e.PNG"},,,,,function(e,a,n){e.exports=n(53)},,function(e,a,n){},,,,,,,,function(e,a){},,,,function(e,a,n){},function(e,a,n){},function(e,a,n){},function(e,a,n){},function(e,a,n){},function(e,a,n){},function(e,a,n){"use strict";n.r(a);var t=n(0),i=n.n(t),r=(n(35),n(21)),c=n.n(r),u=n(22),o=n.n(u),s=n(23),l=n.n(s),m=n(24),d=n.n(m),f=n(25),b=n.n(f),p=n(26),g=n.n(p),E=n(27),v=n.n(E),h=n(28),F=n.n(h),O={botones:[{image:b.a,press:"unselected",id:1,action:"AGREGAR_MAQUINA",name:"Starter",price:600},{image:v.a,press:"unselected",id:2,action:"AGREGAR_MAQUINA",name:"Seller",price:350},{image:d.a,press:"unselected",id:3,action:"AGREGAR_MAQUINA",name:"Crafter",price:450},{image:g.a,press:"unselected",id:4,action:"AGREGAR_MAQUINA",name:"Furnace",price:300},{image:F.a,press:"unselected",id:5,action:"AGREGAR_MAQUINA",name:"Transporter",price:100},{image:c.a,press:"unselected",id:6,action:"BORRAR",name:"",price:0},{image:o.a,press:"unselected",id:7,action:"ROTAR",name:"",price:0},{image:l.a,press:"unselected",id:8,action:"MOVER",name:"",price:0}],configFabrica:{numeroFilas:10,numeroColumnas:8},gameState:{celdas:[],statusInfoBox:{detalle:"",costo:0,ganancias:5e3}},usuario:{username:"NOT_LOGED",fabricas:[],idFabricaActual:0}},q=n(11),C=n(1),S=n(8),A=n(30),j=n(2),k=(n(19),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SELECT":return function(e,a){return e.map(function(e){return e.id!==a?Object(j.a)({},e,{press:"unselected"}):Object(j.a)({},e,{press:"selected"})})}(e,a.id);default:return e}}),N=(n(43),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"@@INIT":default:return e}}),R=function(e,a){return{celdas:e,statusInfoBox:a}},I=function(e){for(var a=[],n=0;n<e.length;n++)a.push({idFila:e[n].idFila,id:e[n].idColumna,maquina:e[n].maquina});return a},y=function(e,a){var n=function(e,a){var n=e.id,t=e.idFila;if(void 0!==e.maquina){switch(e.maquina.direccion){case"SUR":n+=1;break;case"NORTE":n-=1;break;case"OESTE":t-=1;break;default:t+=1}return a.filter(function(e){return e.id===n&&e.idFila===t})[0]}return e}(e,a);void 0!==n&&void 0!==n.maquina&&(console.log("maquina "+e.id+" "+e.idFila+" paso "+e.maquina.materiales+" a maquina "+n.id+" "+n.idFila),n.maquina.materiales=n.maquina.materiales+e.maquina.materiales),e.maquina.materiales=0},x=function(e,a,n){return e.maquina.image.includes("starter")?e.maquina.materiales>0?(console.log("starter "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales),y(e,a),console.log("starter "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales)):e.maquina.materiales=e.maquina.materiales+1:e.maquina.image.includes("transporter")?e.maquina.materiales>0&&(console.log("trans "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales),y(e,a),console.log("trans "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales)):e.maquina.image.includes("seller")&&e.maquina.materiales>0&&(console.log("seller "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales),n.ganancias=n.ganancias+10*e.maquina.materiales,e.maquina.materiales=0,console.log("seller "+e.id+" "+e.idFila+" tiene "+e.maquina.materiales)),e},T=function(e,a){for(var n=[],t=0;t<=e.length-1;t++)void 0!==e[t].maquina?n.push(x(e[t],e,a)):n.push(e[t]);return n},G=function(e,a,n,t){var i=function(e,a,n){var t=e.filter(function(e){return e.id===a&&e.idFila===n});return 0!==t.length?t[0]:void 0}(e,n,t);if(void 0!==i.maquina)return i.maquina.mover=!0,e.map(function(e){return e.id===n&&e.idFila===t?i:e});var r=e.filter(function(e){return void 0!==e.maquina&&e.maquina.mover}),c=r[r.length-1];if(void 0!==c){var u={id:c.id,idFila:c.idFila,maquina:{direccion:c.maquina.direccion,image:c.maquina.image,materiales:c.maquina.materiales}};return e.map(function(e){return void 0===e.maquina?function(e,a,n,t){return e.id===a&&e.idFila===n&&void 0!==t&&(e.maquina={direccion:t.maquina.direccion,image:t.maquina.image,mover:!1,materiales:t.maquina.materiales}),e}(e,n,t,u):function(e,a){return e.id===a.id&&e.idFila===a.idFila&&a.maquina.mover&&(a.maquina=void 0),a}(c,e)})}return e},B=function(e,a,n,t){return e.map(function(e){return e.id===n&&e.idFila===t&&void 0!==e.maquina?Object(j.a)({},e,{maquina:_(e.maquina)}):e})},_=function(e){switch(e.direccion){case"NORTE":e.direccion="ESTE";break;case"ESTE":e.direccion="SUR";break;case"SUR":e.direccion="OESTE";break;case"OESTE":e.direccion="NORTE"}return e},w=function(e,a,n,t,i){return i.ganancias>=a.price?(i.ganancias=i.ganancias-a.price,e.map(function(e){return e.id===n&&e.idFila===t?Object(j.a)({},e,{maquina:{image:a.image,direccion:"SUR",mover:!1,materiales:0}}):e})):e},M=function(e,a,n,t){return e.map(function(e){return e.id===n&&e.idFila===t?Object(j.a)({},e,{maquina:void 0}):e})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AGREGAR_MAQUINA":return R(w(e.celdas,a.boton,a.idCelda,a.idFila,e.statusInfoBox),e.statusInfoBox);case"ROTAR":return R(B(e.celdas,a.boton,a.idCelda,a.idFila),e.statusInfoBox);case"BORRAR":return R(M(e.celdas,a.boton,a.idCelda,a.idFila),e.statusInfoBox);case"MOVER":return R(G(e.celdas,a.boton,a.idCelda,a.idFila),e.statusInfoBox);case"TICK":return R(T(e.celdas,e.statusInfoBox),e.statusInfoBox);case"GET_FABRICA":return R(I(a.celdas),{detalle:"",costo:0,ganancias:a.ganancias});default:return e}},L=function(e,a){for(var n=[],t=a.fabrica.fabricas,i=0;i<t.length;i++)n.push({id_fabrica:t[i].id_fabrica,nombre:t[i].nombre,ganancias:t[i].ganancias,celdas:t[i].celdas});return n},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_USER_OK":return{username:a.fabrica.username,fabricas:a.fabrica.fabricas,idFabricaActual:e.idFabricaActual};case"GET_FABRICA":return{username:e.username,fabricas:e.fabricas,idFabricaActual:a.idFabrica};case"CREAR_FABRICA_OK":return{username:e.username,fabricas:L(0,a),idFabricaActual:0};default:return e}},Q=Object(S.c)({botones:k,configFabrica:N,gameState:U,usuario:P}),K=n(3),D=n(4),J=n(6),V=n(5),W=n(7),$=function(e){function a(e){var n;return Object(K.a)(this,a),(n=Object(J.a)(this,Object(V.a)(a).call(this,e))).state={username:""},n}return Object(W.a)(a,e),Object(D.a)(a,[{key:"onInputChange",value:function(e){this.setState(Object(j.a)({},this.state,{username:e.target.value}))}},{key:"doLogin",value:function(){this.props.loginUser(this.state.username)}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-form"},i.a.createElement("input",{type:"text",onChange:this.onInputChange.bind(this)}),i.a.createElement("button",{className:"login",onClick:this.doLogin.bind(this),disabled:!this.state.username},"Login"))}}]),a}(i.a.Component),z=n(17),H=n.n(z),X=n(31),Y=n(32),Z=n.n(Y),ee=function(e){return{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(e)}},ae=function(e){return Object(j.a)({method:"POST"},ee(e))},ne=function(e){return Object(j.a)({method:"PUT"},ee(e))},te=ce("SAVE_GAME"),ie=ce("LOGIN_USER"),re=(ce("GET_FABRICA"),ce("CREAR_FABRICA"));function ce(e){return{loading:e+"_LOADING",ok:e+"_OK",error:e+"_ERROR"}}function ue(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return{response:e}},t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;return function(){var r=Object(X.a)(H.a.mark(function r(c){var u,o,s;return H.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c(Object(j.a)({type:a.loading},t)),r.prev=1,r.next=4,e();case 4:return u=r.sent,r.next=7,u.json();case 7:o=r.sent,u.ok?(c(Object(j.a)({type:a.ok},n(o))),Z.a.isFunction(i)&&i(c,o)):(s=o.status?o.status:u.statusText,c({type:a.error,message:s})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),c({type:a.error,message:r.t0.message});case 14:case"end":return r.stop()}},r,null,[[1,11]])}));return function(e){return r.apply(this,arguments)}}()}n(13);var oe=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},function(e){return{loginUser:function(a){return e(function(e){return ue(function(){return fetch("api/"+e)},ie,function(e){return{fabrica:e}},{})}(a))}}})($),se=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"Container"},i.a.createElement("h1",null,"Wayne's Tech"),i.a.createElement("div",{className:"LoginPage"},i.a.createElement(oe,null))))},le=(n(47),function(e){var a=e.nombre,n=e.ganancias,t=e.id,r=e.recuperarFabrica,c=e.celdas;return i.a.createElement("div",{className:"fabrica",onClick:function(){return r(n,t,c)}},"Nombre: ",a,", Ganancias: ",n)}),me=function(e){function a(e){var n;return Object(K.a)(this,a),(n=Object(J.a)(this,Object(V.a)(a).call(this,e))).state={name:""},n}return Object(W.a)(a,e),Object(D.a)(a,[{key:"onInputChange",value:function(e){this.setState(Object(j.a)({},this.state,{name:e.target.value}))}},{key:"doLogin",value:function(){this.props.crearFabrica(this.props.usuario.username,this.state.name,5e4)}},{key:"render",value:function(){return i.a.createElement("div",{className:"crear-fabrica-form"},i.a.createElement("input",{type:"text",onChange:this.onInputChange.bind(this)}),i.a.createElement("button",{className:"crearFabrica",onClick:this.doLogin.bind(this),disabled:!this.state.name},"Crear"))}}]),a}(i.a.Component),de=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},function(e){return{crearFabrica:function(a,n,t){e(function(e,a){return ue(function(){return fetch("/api/"+e+"/fabrica",ae({nombre:a}))},re,function(e){return{fabrica:e}},{})}(a,n))}}})(me),fe=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},function(e){return{recuperarFabrica:function(a,n,t){return e(function(e,a,n){return{type:"GET_FABRICA",idFabrica:a,ganancias:e,celdas:n}}(a,n,t))}}})(le),be=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"Container"},i.a.createElement("h1",null,"Wayne's Tech"),i.a.createElement("div",{className:"UsuarioFabricaPage"},function(e,a){var n=[];if(e.length<=0)return i.a.createElement("div",null,"Ooh! No tenes ni una fabrica, create una viteh!");for(var t=0;t<e.length;t++)n.push(i.a.createElement(fe,{key:t,nombre:e[t].nombre,ganancias:e[t].ganancias,id:e[t].id_fabrica,celdas:e[t].celdas,username:a}));return n}(e.usuario.fabricas,e.usuario.username)),i.a.createElement("br",null),i.a.createElement(de,null)))},pe=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},null)(be),ge=(n(48),n(49),n(50),function(e){switch(e){case"NORTE":return"Maquina up";case"SUR":return"Maquina down";case"ESTE":return"Maquina left";case"OESTE":return"Maquina right";default:return"Maquina up"}}),Ee=function(e){var a=e.image,n=e.direccion;return i.a.createElement("div",{className:ge(n)},i.a.createElement("img",{src:a,alt:"maquina"}))},ve=function(e,a,n){var t=e.filter(function(e){return e.id===a&&e.idFila===n});return 0!==t.length&&void 0!==t[0].maquina?i.a.createElement(Ee,{image:t[0].maquina.image,direccion:t[0].maquina.direccion,mover:t[0].maquina.mover}):i.a.createElement("div",null,t[0].id+" "+t[0].idFila)},he=function(e){var a=e.onClickCelda,n=e.boton,t=e.id,r=e.fila,c=e.gameState;return i.a.createElement("div",{className:"celda",onClick:function(){return a(n,t,r)}},ve(c.celdas,t,r))},Fe=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},function(e){return{onClickCelda:function(a,n,t){e(function(e,a,n,t){return function(e,a,n,t){return{type:void 0===e?"@@INIT":e.action,boton:e,idCelda:a,idFila:n,ganancias:t}}(e,a,n)}(a,n,t))}}})(he),Oe=(n(51),function(e){function a(e){var n;return Object(K.a)(this,a),(n=Object(J.a)(this,Object(V.a)(a).call(this,e))).state={celdas:[]},n}return Object(W.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"fila"},this.dibujarCeldas())}},{key:"getFabricaActual",value:function(e,a){return e.filter(function(e){return e.id_fabrica===a})[0]}},{key:"dibujarCeldas",value:function(){for(var e=[],a=1;a<=this.props.columnas;a++)this.props.celdaStore.length<this.props.columnas*this.props.filas&&this.props.celdaStore.push({id:a,idFila:this.props.index}),e.push(i.a.createElement(Fe,{key:a,id:a,boton:this.props.boton,fila:this.props.index,columna:a}));return this.celdas=e,e}}]),a}(t.Component)),qe=function(e){var a=e.tickMaquinas;return i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"tickButton",onClick:function(){return a()}},"Start!"))},Ce=Object(C.b)(function(e){return{gameState:e.gameState,botones:e.botones,configFabrica:e.configFabrica}},function(e){return{tickMaquinas:function(){setInterval(function(){e({type:"TICK"})},3e3)}}})(qe),Se=function(e){var a=e.saveGame,n=e.gameState,t=e.usuario;return i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"saveButton",onClick:function(){return a(t.username,t.idFabricaActual,n.statusInfoBox.ganancias,function(e){for(var a=[],n=0;n<e.length;n++)a.push({idFila:e[n].idFila,idColumna:e[n].id,maquina:e[n].maquina});return a}(n.celdas))}},"Save"))},Ae=Object(C.b)(function(e){return{gameState:e.gameState,botones:e.botones,configFabrica:e.configFabrica,usuario:e.usuario}},function(e){return{saveGame:function(a,n,t,i){e(function(e,a,n,t){return ue(function(){return fetch("/api/"+e+"/fabricas/"+a,ne({ganancias:n,celdas:t}))},te,function(e){return{fabrica:e}},{})}(a,n,t,i))}}})(Se),je=function(e,a,n,t,r){for(var c=function(e){var a=e.filter(function(e){return"selected"===e.press});return 0===a.length?void 0:a[0]}(n),u=[],o=1;o<=e;o++)u.push(i.a.createElement(Oe,{key:o,index:o,usuario:r,columnas:a,boton:c,celdaStore:t.celdas,filas:e}));return u},ke=function(e){var a=e.configFabrica,n=e.botones,t=e.gameState,r=e.usuario;return i.a.createElement("div",{className:"grilla"},je(a.numeroFilas,a.numeroColumnas,n,t,r),i.a.createElement("div",null,i.a.createElement(Ce,null),i.a.createElement(Ae,null)))},Ne=Object(C.b)(function(e){return{gameState:e.gameState,botones:e.botones,configFabrica:e.configFabrica,usuario:e.usuario}},null)(ke),Re=(n(20),function(e){switch(e){case"selected":return"ButtonToolbox seleccionado";case"unselected":default:return"ButtonToolbox"}}),Ie=function(e){var a=e.onClick,n=e.image,t=e.press;return i.a.createElement("div",{className:Re(t),onClick:a},i.a.createElement("img",{src:n,alt:"tool"}))},ye=function(e){var a=e.botones,n=e.onButtonToolClick;return i.a.createElement("div",{className:"ToolBox"},i.a.createElement("h3",null,"M\xe1quinas"),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[0].id,a[0].name,a[0].price)},image:a[0].image,press:a[0].press})),i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[1].id,a[1].name,a[1].price)},image:a[1].image,press:a[1].press}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[2].id,a[2].name,a[2].price)},image:a[2].image,press:a[2].press})),i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[3].id,a[3].name,a[3].price)},image:a[3].image,press:a[3].press}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[4].id,a[4].name,a[4].price)},image:a[4].image,press:a[4].press}))))),i.a.createElement("h3",null,"Edici\xf3n"),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[5].id,a[5].name,a[5].price)},image:a[5].image,press:a[5].press})),i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[6].id,a[6].name,a[6].price)},image:a[6].image,press:a[6].press}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(Ie,{onClick:function(){return n(a[7].id,a[7].name,a[7].price)},image:a[7].image,press:a[7].press}))))))},xe=Object(C.b)(function(e){return{botones:e.botones}},function(e){return{onButtonToolClick:function(a,n,t){e(function(e,a,n){return{type:"SELECT",id:e,name:a,price:n}}(a,n,t))}}})(ye),Te=(n(52),function(e){function a(){return Object(K.a)(this,a),Object(J.a)(this,Object(V.a)(a).apply(this,arguments))}return Object(W.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"Infobox"},i.a.createElement("h3",null,"Detalles"),i.a.createElement("div",{className:"InfoBoxContenido"},i.a.createElement("h2",null," Ganancias: ","$ "+this.props.gameState.statusInfoBox.ganancias+",00"),i.a.createElement("div",null,this.props.gameState.statusInfoBox.detalle),i.a.createElement("div",null,i.a.createElement("div",null,this.props.gameState.statusInfoBox.costo>0?"$ "+this.props.gameState.statusInfoBox.costo+",00":""))))}}]),a}(t.Component)),Ge=Object(C.b)(function(e){return{configFabrica:e.configFabrica,botones:e.botones,gameState:e.gameState}},null)(Te),Be=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"Container"},i.a.createElement("h1",null,"Wayne's Tech"),i.a.createElement("div",{className:"App"},i.a.createElement(xe,null),i.a.createElement(Ne,null),i.a.createElement(Ge,null))))},_e=Object(C.b)(function(e){return{botones:e.botones,gameState:e.gameState,configFabrica:e.configFabrica,usuario:e.usuario}},void 0)(function(e){var a=e.usuario;return"NOT_LOGED"===a.username?i.a.createElement(se,null):0===a.idFabricaActual?i.a.createElement(pe,null):i.a.createElement(Be,null)}),we=Object(S.e)(Q,O,Object(S.d)(Object(S.a)(A.a))),Me=document.getElementById("root");if(!Me)throw new Error("couldn't find element with id root");Object(q.render)(i.a.createElement(C.a,{store:we},i.a.createElement(_e,null)),Me)}],[[33,1,2]]]);
//# sourceMappingURL=main.57e80c5e.chunk.js.map